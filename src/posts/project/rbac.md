---
title: 实现过的功能（十二）：基于角色的权限管理
date: 2017-12-30
tags: 后端,PHP
description: 基于角色权限管理
sort: 17
---

以前一直用 ThinkPHP 3.2 ，虽然它有权限管理，但当初有点看不懂，就自己摸搞了一波。

## 前言

本文指代：

* RBAC：基于节点
* Auth: 基于规则

用得多的是 RBAC ，Auth 不是很熟。虽然写出来过，但是都没怎么理解到。

## RBAC

ThinkPHP 中：

* 三级节点 Module > Controller > Action 。
* 表关系：用户表 => 用户角色关联表 => 角色表 => 角色节点关联表 => 节点表

使用时：

* 表关系：用户表 => 角色表 => 节点表（在前一个表里保存关联）

## Auth

ThinkPHP 中：

* 定制规则、表达式，可以多个节点一规则。（节点关系可 AND 可 OR）
* 表关系：用户表 => 用户和用户组关联表 => 用户组表 => 规则表

使用时：

* 多为单一节点一规则。
* 表关系：用户表 => 用户组表 => 规则表（主要是使用所属多个用户组）

## 注意

ThinkPHP 的相应权限管理使用还需要对应去配置，这里没有提。

然后使用的权限管理其实都是简略版的。（一般都看情况使用）