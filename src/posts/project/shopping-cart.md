---
title: 实现过的功能（二）：购物车
date: 2017-12-20
tags: 功能,前端,JavaScript
description: 购物车
sort: 4
---

暂时想不到要记录什么，先简单写下。

## 加减控件

本来是要将加减操作封装为控件的，然而公司数据的结构问题，就分别定义了「购物车外」和「购物车内」两种的加减方式。

## 用户购物车

使用的是 `localStorage` 存储于本地，考虑到可能切换账号，就加入了用户标识。

```JavaScript
user: {
    shop: {
        goods: { ... }
    }
}
```

## 加入合作商

公司需求，需要额外一个购物车，又要两个购物车看起来像一个购物车，于是结构改变。

```JavaScript
user: {
    shop: {
        shopGoods: {
            goods: { ... }
        }
        partnerGoods: {
            goods: { ... }
        }
    }
}
```

## 有个想法

数据结构比较清晰时，加减只需操作对应商品数量，价格和优惠的计算是另一个控件。之所以有这个想法，是因为写小程序的时候，最终总是会卡顿，又不知道该如何优化，就想这是不是一种方法。
